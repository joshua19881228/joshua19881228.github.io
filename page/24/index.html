<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Do not aim for success if you want it; just do what you love and believe in, and it will come naturally.">
<meta property="og:type" content="website">
<meta property="og:title" content="Joshua&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/page/24/index.html">
<meta property="og:site_name" content="Joshua&#39;s Blog">
<meta property="og:description" content="Do not aim for success if you want it; just do what you love and believe in, and it will come naturally.">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Joshua LI">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/24/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Joshua's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Joshua's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-my-jumble-of-computer-vision">

    <a href="/2016/08/25/Computer_Vision/2016-08-25-my-jumble-of-computer-vision/" rel="section"><i class=" fa-fw"></i>My Jumble of Computer Vision</a>

  </li>
        <li class="menu-item menu-item-an-introduction-to-cnn-based-object-detection">

    <a href="/2017/06/13/Computer_Vision/2017-06-13-An-Introduction-to-CNN-based-Object-Detection/" rel="section"><i class=" fa-fw"></i>An Introduction to CNN based Object Detection</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/08/29/Computer_Vision/2015-08-29-Ndriver-Cuda/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar-icon.png">
      <meta itemprop="name" content="Joshua LI">
      <meta itemprop="description" content="Do not aim for success if you want it; just do what you love and believe in, and it will come naturally.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joshua's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/08/29/Computer_Vision/2015-08-29-Ndriver-Cuda/" class="post-title-link" itemprop="url">Installation of NVIDIA GPU Driver and CUDA Toolkit</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-08-29 00:00:00" itemprop="dateCreated datePublished" datetime="2015-08-29T00:00:00+08:00">2015-08-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-19 17:11:04" itemprop="dateModified" datetime="2022-08-19T17:11:04+08:00">2022-08-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Vision/" itemprop="url" rel="index"><span itemprop="name">Computer Vision</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Table-of-Content"><a href="#Table-of-Content" class="headerlink" title="Table of Content"></a>Table of Content</h2><ul>
<li>Content<br>{:toc}</li>
</ul>
<h2 id="Disable-default-driver"><a href="#Disable-default-driver" class="headerlink" title="Disable default driver"></a>Disable default driver</h2><ol>
<li>modify <code>/etc/modprobe.d/blacklist.conf</code> by adding following commond at the end of the file:<code>blacklist nouveau</code></li>
<li>modify <code>/etc/default/grub</code> file by adding <code>rdblacklist=nouveau nouveau.modeset=0</code></li>
</ol>
<h2 id="Install-NVIDIA-GPU-Driver"><a href="#Install-NVIDIA-GPU-Driver" class="headerlink" title="Install NVIDIA GPU Driver"></a>Install NVIDIA GPU Driver</h2><ol>
<li>type <code>ctrl+alt+F1</code> to tty and log in.</li>
<li>shut down lightdm <code>sudo service lightdm stop</code></li>
<li>add source <code>sudo add-apt-repository ppa:xorg-edgers/ppa</code>,<code>sudo apt-get update</code>.</li>
<li>install driver. Note that the version of the driver must be correspondent to the GPU card. One can find the correct version in NVIDIA official website. For example, my GPU is GTX970M, then I should use the following commend: <code>sudo apt-get install nvidia-352</code> and <code>sudo apt-get install nvidia-352-uvm</code></li>
<li>reboot</li>
</ol>
<h2 id="Install-CUDA-Toolkit"><a href="#Install-CUDA-Toolkit" class="headerlink" title="Install CUDA Toolkit"></a>Install CUDA Toolkit</h2><ol>
<li>download CUDA 7.0 .run file from NVIDIA website. Note that the CUDA version should be correspendent to gcc version and driver version.</li>
<li>change .run file mode by <code>chmod +x *.run</code></li>
<li>install CUDA by <code>sudo ./*.run</code>. Note to skip the installation of driver.</li>
<li>add necessary environment path by <code>PATH=/path/to/cuda/bin:$PATH</code> and <code>LD_LIBRARY_PATH=/path/to/cuda/lib64:$LD_IBRARY_PATH</code> and export them. Alternatively, one can modify /etc/profile to set the environment paths. For example, add <code>export PATH=&quot;/path/to/cuda/bin:$PATH&quot;</code> and in commond line type <code>source /etc/profile</code></li>
<li>verify the installation. Change directory to CUDA sample and make the samples. Run a sample <code>sudo ./deviceQuery</code> to verify the installation.</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/08/27/Life_Discovery/Miscellaneous/2015-08-27-Miscellaneous/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar-icon.png">
      <meta itemprop="name" content="Joshua LI">
      <meta itemprop="description" content="Do not aim for success if you want it; just do what you love and believe in, and it will come naturally.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joshua's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/08/27/Life_Discovery/Miscellaneous/2015-08-27-Miscellaneous/" class="post-title-link" itemprop="url">2007年12月的一个梦</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-08-27 00:00:00" itemprop="dateCreated datePublished" datetime="2015-08-27T00:00:00+08:00">2015-08-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-19 17:11:04" itemprop="dateModified" datetime="2022-08-19T17:11:04+08:00">2022-08-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Life-Discovery/" itemprop="url" rel="index"><span itemprop="name">Life Discovery</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>上篇博文里记述了我的一个梦，突然想到很久以前我也梦见过一个很离奇的梦，也是跟爱情相关。翻了自己在人人网上的日志终于找到了，是2007年12月的一个梦，刚刚上大学，真是年轻单纯啊，连梦的结尾都比最近的梦圆满。当时的梦境是：</p>
<blockquote>
<p>某个年代（似乎是拿破仑时代，十九世纪二十年代左右），我在某个王国（欧洲风格），我有一个恋人，或者是认识了一个女孩（记不清了）。我不知道她的国籍，但我想和我一样，因为我们可以毫无障碍的交流。我看不清她的模样，在梦里她总是模糊的。我有个朋友是国王的近臣，他掌管军队的物资。</p>
<p>有一次，那个女孩要去一个城镇（忘了原因），女孩出发了，但我非常不安，便跟去了。有一天，在我们俩见面的时候，我看见她脚下的土地能够倒映她的身影，不是普通的阴影，而是像镜子一样的倒影，就好像水面一样，但倒影非常模糊。我又开始非常不安，就急切地劝她离开这个城镇。当我们刚刚骑马走出城，马就惊了，把我们两个人摔在了城外。这个时候突然地面开始抖动，发生了一场特别恐怖的地震。地震过后，我们俩回望那个城镇，它已经完全成为了废墟。我们都非常庆幸，但我并没有告诉她我都看到了什么。</p>
<p>平平安安地过了一段时间，国王派遣我去某个地方，那是个军队驻地。那个女孩在送我走的时候也看到我身下又很不清晰的倒影，并感到很焦虑。她就把这件事告诉了那个作大臣的朋友。当得知我去的那个地方的名字后，他十分吃惊。他说那个地方已经荒废了，那儿有个秘密建的非常大的火药库，但本来火药库不该建在那儿，所以马上就要被炸毁了。可能是有人想要害死我。就这样，那个朋友骑快马追上了我，秘密的告诉了我这些事。但我身边有个人总是在催促我赶快上路，说国王命令不能拖延。朋友无奈只得回去，那个女孩没办法，只好自己赶来了，不知道她怎么就让我在路上停留了一天（忘记原因了）。我们延迟了一天到达目的地，在转过一个小山包之前，我们听到了剧烈的爆炸声。转过山包，又是一片废墟。</p>
<p>最后，朋友为了我的安全，把我转移到了另一个国家，和我一起离开的还有那个女孩。朋友在送我走的时候说：真爱的人可以看清对方脚下的土地！</p>
</blockquote>
<p>记得当时做这个梦醒来之后是一种精神饱满、神清气爽的感觉。最近的那个梦也是如此，但是结尾就显得比较隐晦，好像是绝望中隐含着希望，后来也没有再接着梦到这个故事了，姑且当做也有个圆满的结局吧。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/08/01/Life_Discovery/Miscellaneous/2015-08-01-Miscellaneous/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar-icon.png">
      <meta itemprop="name" content="Joshua LI">
      <meta itemprop="description" content="Do not aim for success if you want it; just do what you love and believe in, and it will come naturally.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joshua's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/08/01/Life_Discovery/Miscellaneous/2015-08-01-Miscellaneous/" class="post-title-link" itemprop="url">梦</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-08-01 00:00:00" itemprop="dateCreated datePublished" datetime="2015-08-01T00:00:00+08:00">2015-08-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-19 17:11:04" itemprop="dateModified" datetime="2022-08-19T17:11:04+08:00">2022-08-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Life-Discovery/" itemprop="url" rel="index"><span itemprop="name">Life Discovery</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>昨天夜里做了个梦。</p>
<p>我叫刘亚楠，年龄应该是18-19岁左右。在A城某学校上学，这所学校绝不是现实中的大学，更像是培训中心，教会学生如何成为人类社会的一颗螺丝钉，如何为了人类的生存而服从管理。在这里，恋爱是被禁止的，因为一个人的未来已经被确定了，他或她以后有没有被计划结婚，繁衍几个后代都是确定的。但是，我和一个叫陈美玲的女孩恋爱了，虽然只能是地下恋情，我们依旧很开心。</p>
<p>终于有一天我们的事情暴露了，在傍晚天刚刚黑下来的时候，学校的负责人带着政府的人来抓我们。这一天天气阴沉，刚刚下过雨，道路湿滑，宿舍楼道里的黄色灯光十分昏暗，还在不停的抖动，时亮时暗。我的好朋友alice(一个有点男人婆的女生)跑来告诉我快逃，于是我拉着美玲逃出了学校。我清楚地记得当我们转过楼道尽头来到一侧的楼梯间时，来抓我们的人刚刚走出楼道另一侧的楼梯间，就这样他们错过了我们。</p>
<p>A城晚上是有宵禁的，无缘无故在外面瞎晃是会被抓起来的，于是我和美玲决定乘长途汽车先躲到临城，然后想办法逃到偏远地区生活。学校里，学校负责人发现我们不见了，要求学校里的所有老师和学生对学校和A城进行搜索。从A城出发的长途汽车站只有一个，位于一个叫“老城墙”的地方，而我们离这个地方很远，必须乘车才能到。为了不被学校的人抓到，我们必须去一个偏远的公交站坐车。在去公交站的路上，我们发现有学校的人，我们知道他们是来抓我们的，于是我们不得不去另一个更远的车站。在路上我们不停的跑，一是因为每天公交的班次是有限的，错过了就要几个小时以后才能有下一班，另一个原因就是我们害怕被抓到。</p>
<p>当我们跑到车站的时候，天已经完全黑了，街边立着不太亮的路灯，我们躲到车站旁边小巷的阴影里忐忑地等车，一边盼望着车快点来，一边紧张地关注着是不是有学校的人出现。当公交车缓缓的进站时，我们走出阴影，准备上车。这时，我突然发现有一群人向车站走来，他们是学校里的学生。这些人中有几个是和我熟识的朋友，其中一个是alice。还有一个小男孩，只有14-15岁，我们都管他叫“小孩”，因为他的年龄比我们都小，很可爱，而且善良单纯，别人说什么都信。我赶紧压低了美玲和我的帽檐，我只盼着他们不要在人群里把我们认出来，因为车已经停下来了，我们马上就可以上车了。这时来抓我们的人已经走到我们身边了，“小孩”就在我身边，我扭过脸怕被他发现，但是他还是发现了我，与我四目相对的一刻，我看到了他眼中的惊奇，或许他从来没有想到过真的可以找到我们，我冲他摇了摇头，希望他不用揭发我们。但是，在一丝犹豫之后，他还是向其他人大喊我在这里。这时车门开了，我一把把美玲推上车，而我被一只手抓住了，虽然我挣脱了那只手，但是我没能上车，我只能沿着路逃跑，我能看见美玲在车窗里流着泪向我比划着说到临城找她。</p>
<p>宵禁开始了，没有办法，我只能悄悄潜回了学校，躲进了存放打扫工具的房间，我锁上了门，但不敢打开房间里的灯，害怕被人发现。我躲进来不久，房门被钥匙打开了，我赶快躲到了一堆工具后面，但是进来的人没有开灯。我听见他们说话，是alice和“小孩”，alice指责“小孩”为什么要揭发我，“小孩”说是因为老师要求的，alice很无奈，只好让“小孩”先回去了。过了一会儿，alice也出去了，从外面锁了门。等了一会儿，我刚刚感觉到放松，想从工具后面出来，找个舒服一点的地方打个盹，这时门锁又被转动了，进来一个膀大腰圆的男人，他打开灯，一个箭步就把我从工具后面抓了出来…</p>
<p>醒了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/07/28/Life_Discovery/Miscellaneous/2015-07-28-Miscellaneous/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar-icon.png">
      <meta itemprop="name" content="Joshua LI">
      <meta itemprop="description" content="Do not aim for success if you want it; just do what you love and believe in, and it will come naturally.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joshua's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/07/28/Life_Discovery/Miscellaneous/2015-07-28-Miscellaneous/" class="post-title-link" itemprop="url">关于《哈利》系列</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-07-28 00:00:00" itemprop="dateCreated datePublished" datetime="2015-07-28T00:00:00+08:00">2015-07-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-19 17:11:04" itemprop="dateModified" datetime="2022-08-19T17:11:04+08:00">2022-08-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Life-Discovery/" itemprop="url" rel="index"><span itemprop="name">Life Discovery</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近听电子书，搞了一本英音原本的《哈利波特》，不禁想起“年轻”时写的一篇博文，粘来应应景。</p>
<p>那时刚刚在影院看了《哈利波特与混血王子》，感觉这是除了第一部和第二部之外拍的最好的一部，不过依旧是观前期待很大，观后略微失望的感觉。这一部仍然延续了前几部灰暗阴冷的风格，即使在比较热情的魁地奇赛场上也没有太多的暖色调，朦胧的爱情也没有沉浸在玫瑰的红艳之中。虽然这一部本来就很阴郁，但缺少暖色总是让电影给人一种沉闷的感觉，紧张的情绪也总得不到调节，对于一部将近三个小时的电影来说难免令人感到精神疲劳。</p>
<p>最初接触哈利系列是在电影院，应该是初中的时候，那个时候对哈利系列完全是一种不屑的心态，因为不管是《魔法石》还是《密室》都是纯纯粹粹就是儿童影片，没有什么新意，而且剧情雷同。和其他人不同，我连一本哈利系列的小说都没有买，也没用兴趣去读这样一部儿童读物，即使有同学跟我争论说这是一部老少皆宜的作品，我也不以为然。相反，我对另一部英国魔幻作品《指环王》却是出奇的着迷，或许是其磅礴的诗史气魄格外吸引人，所以我也读了《指环王》原著的三部曲及其前传，而对哈利系列始终没有兴趣。</p>
<p>在大二上学期，花了两个月读完哈利系列，对这部作品有了一些新的看法。这部作品给我最大的印象就是它是一个关于成长的故事，它的出版速度十分符合我们这一代人成长的时间进程，1997年第一部出版到2007年最后一部完结，从十来岁的少年到十八九的青年正好被七部小说的出版所覆盖，小说的内容也逐渐成人化。从小孩子对魔法的好奇与向往开始，第一二部里神奇的魔法世界，诡异的车站，骑着扫把飞翔的魔法师，独特的魁地奇……等等一些新奇的玩意儿给小孩子们很多充满想象力的冲击，这时的电影风格也是暖色调居多，尤其第一二部完全可以当做独立电影来看待，完整的故事情节，绚丽的电脑特技和圆满的结尾都让它成为不错的儿童电影；后来便开始了成长的烦恼，从第三部起，一直到第五部，我认为小说都是在重复第一二部的故事结构，没有什么创新，而且故事之间的连续性很差，估计唯一的联系就是伏地魔逐渐强大起来，给最后两部做个蹩脚的铺垫，在读小说的过程中，读第一二部还觉得不错，但是第三部开始便开始感觉到有一些厌烦。电影也是如此，类似的故事结构，没有什么新意的特效，四平八稳的指导，都没让这三部电影给人留下深刻的印象。到了第六部和第七部，故事才有所转折，而且这里主人公也已经开始体验亲情，友情，爱情，背叛，忠诚，正义，邪恶……小说的高潮也从此开始。但是电影依旧没有什么太大的起色，对原著的改编也并不成功，而且越到最后对于那些没有看过原著的观众来说，电影越来越难以理解。</p>
<p>对于哈利系列，原著比电影应该更吸引人，而且阅读给人留下的想象空间更广大，也正是因此对于忧郁的中间几部而言，总会有一些令人放松精神的篇章，在这些地方读者不会受困于电影画面的禁锢而不得不继续忧郁着。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/06/28/Life_Discovery/Miscellaneous/2015-06-28-Miscellaneous/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar-icon.png">
      <meta itemprop="name" content="Joshua LI">
      <meta itemprop="description" content="Do not aim for success if you want it; just do what you love and believe in, and it will come naturally.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joshua's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/06/28/Life_Discovery/Miscellaneous/2015-06-28-Miscellaneous/" class="post-title-link" itemprop="url">Duke University ENGLISH COMPOSITION I Assignment: I am a writer</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-06-28 00:00:00" itemprop="dateCreated datePublished" datetime="2015-06-28T00:00:00+08:00">2015-06-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-19 17:11:04" itemprop="dateModified" datetime="2022-08-19T17:11:04+08:00">2022-08-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Life-Discovery/" itemprop="url" rel="index"><span itemprop="name">Life Discovery</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>My name is Li Zhixuan, currently a computer vision engineer in Beijing, China. If you like, you can call me Joshua, which sounds more or less like my Chinese given name.</p>
<p>I did not notice that I am already a writer until I drew the time line of my humble writing career. The first memories of my starting writing are those diaries that I kept in summer holidays according to my Chinese teacher’s request when I was in grade six to eight. At that time, I just hated writing because I did not know what to write about due to not many meaningful things happened in holidays. Besides, being unable to tell a story lively made me feel pathetic and inferior. However, sometimes I did feel happy about my writings. I remembered that I wrote a short story about how I was annoyed by mosquitoes and got up killing them in a summer night. The story was written in ancient Chinese style imitating a text from my Chinese textbook. I got a Bravo from my Chinese teacher and she said it was really funny to read. Though I still suffered from lack of words and telling stories like presenting facts, I began to feel free to write and cultivated a habit of keeping diaries from then on. Thanks to that, I got three huge notebooks full of growing pains in my “secret chamber”.</p>
<p>I began to know academic writing when I was in university. There were many courses that required an essay for evaluation. From the reference papers, I learnt to propose problems, explain solutions and presenting evidence of effectiveness and feasibility. Unlike most of my peers feeling awful about writing their Master degree dissertations, I felt quite comfortable with it mainly because I had much to share with others. My dissertation was about detecting certain events in surveillance videos. I was so eager to share with others about how meaningful the task was, what flaws current algorithms had and how I improved them that it was as if everything was just bursting out of my mind. Although I write much in Chinese, I have little experience of writing academic papers in English. The only experience is a paper I wrote about detecting pedestrians in images, which was a part of work from my Master dissertation and the paper was published in an international conference. It was because of the conference that I got a chance to visit Krakow, a beautiful historical city in Poland. I felt really proud of myself presenting my work in the conference and it was really a pleasant trip to Krakow, appreciating its marvelous beauty and culture.</p>
<p>Currently, I am working in an IT company and writing patents, project documentation and slides is also my responsibility. In addition, I am writing this blog. Those are some of the reasons I am taking this course. I wish I could really improve myself and have fun with writing!</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/31/Life_Discovery/Miscellaneous/2015-05-31-Miscellaneous/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar-icon.png">
      <meta itemprop="name" content="Joshua LI">
      <meta itemprop="description" content="Do not aim for success if you want it; just do what you love and believe in, and it will come naturally.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joshua's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/05/31/Life_Discovery/Miscellaneous/2015-05-31-Miscellaneous/" class="post-title-link" itemprop="url">重温《X档案》</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-05-31 00:00:00" itemprop="dateCreated datePublished" datetime="2015-05-31T00:00:00+08:00">2015-05-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-19 17:11:04" itemprop="dateModified" datetime="2022-08-19T17:11:04+08:00">2022-08-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Life-Discovery/" itemprop="url" rel="index"><span itemprop="name">Life Discovery</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近在看一个特别古老的美剧《X档案》，特别小的时候断断续续看过一些，记得好像是在中央八电视剧频道演过。在Wiki上这个剧被定义为science fiction horror drama television series，听起来好像挺奇怪的，科幻恐怖剧。看了看还真是挺恐怖的，不知道小时候看这个是不是被吓得够呛。虽然这个剧有点年头了，1993-2002年在FOX电视台播出，但是现在再看剧情和拍摄手法依旧很吸引人，而且正是由于拍摄久远，导致画面很模糊，给这部电视剧添加了一种莫名的神秘感，模模糊糊的画面好像有意遮挡了一些真相，更符合这部剧的风格。</p>
<p>这部剧涵盖了外星人、超自然现象、政府骗局和阴谋论等等所有相关主题。其中印象最深刻的是第一季第10集还是第11集中的一小段片段，估计对我当时还幼小的心灵造成过心理阴影。这还得从小时候读到的一些东西说起，那时候经常读一些科幻或者科普的书或杂志，里面记录了很多科学之谜和UFO目击者的谈话记录，比如麦田怪圈和被外星人绑架什么的。有一段是讲一个农场里的牛一夜之间都死掉了，而且全都被割去了一只耳朵和一片嘴唇，但是农场主却没有察觉到任何异常，于是就有人解释说是外星人干的。看过这个故事之后，特别害怕自己那一天也会被外星人绑架，然后被割掉耳朵和嘴唇。后来在电视剧里有类似的剧情出现，女主问男主这样做的意义在于什么，男主回答说就好像我们解刨鱼和青蛙一样，这话真是说得令人毛骨悚然啊。也真是佩服自己小时候竟然受到过这么大的刺激，不知道这部电视剧在美国是不是儿童限制级。现在网络这么发达，估计现在的小孩可以接触到更恐怖的信息，不知道对他们来说是不是也埋藏了各种心理阴影。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/10/Life_Discovery/Miscellaneous/2015-05-10-Miscellaneous/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar-icon.png">
      <meta itemprop="name" content="Joshua LI">
      <meta itemprop="description" content="Do not aim for success if you want it; just do what you love and believe in, and it will come naturally.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joshua's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/05/10/Life_Discovery/Miscellaneous/2015-05-10-Miscellaneous/" class="post-title-link" itemprop="url">回忆克拉科夫</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-05-10 00:00:00" itemprop="dateCreated datePublished" datetime="2015-05-10T00:00:00+08:00">2015-05-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-19 17:11:04" itemprop="dateModified" datetime="2022-08-19T17:11:04+08:00">2022-08-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Life-Discovery/" itemprop="url" rel="index"><span itemprop="name">Life Discovery</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近出游比较多，五一假期之前的周末随公司去云蒙山爬山，假期去了无锡和苏州，张大夫在南京研究各种花花草草，让人不得不好好热爱了一把生活。其实说起出游，真正让我开始感觉到应该多去走走、体验不一样的生活，是去波兰的克拉科夫Krakow参加2013年的International Conference on Advanced Video and Signal based Surveillance，也是从那个时候开始让我觉得一个人出游的乐趣。在克拉科夫逛了很多地方，感受了当地丰富多彩的文化。因为是自己一个人，所以逛的很惬意，全程都是徒步，累了就在街边的露天餐馆歇一歇，其实就好像咱们国内的大排档，只不过对咱们来说少了烧烤的油烟，多了点小资的味道，喝点汤吃点面包，恢复恢复体力。本想回来好好记录一下这三天在克拉科夫的见闻，一犯懒一晃一年半过去了，记忆也都模糊了，不过能想起来的肯定都是精髓了。</p>
<p>8月26日俄航凌晨的飞机飞往莫斯科，由莫斯科转机到克拉科夫，网上说俄航的服务态度很差、经常丢行李，在莫斯科转机安检也很麻烦，不过我个人感觉还好，没有遇到什么太大的麻烦，但是由于航班的缘故，在莫斯科机场呆了四五个小时，没有当地签证，就只能干坐着，蹭着机场里龟速的WIFI发了两篇微博。飞机上最激动人心的就是看日出了，还没见过黄山的云海日出，先拿飞机上的充数吧。亲近亲近大自然，感受伟大的造物主，瞬间就会让生活中的磕绊困难显得渺小，充满了信心去生活，所以总有人说“去散散心吧”，大概就是因为如此吧！</p>
<p> <img class="img-responsive center-block" src="https://raw.githubusercontent.com/joshua19881228/my_blogs/master/Life_Discovery/Miscellaneous/figures/krakow/01.jpg" alt="" width="480"/></p>
<p>从莫斯科往克拉科夫是只坐大约100人的小飞机，还是第一次坐这么小的飞机，起飞降落的时候还挺刺激的，遇到气流颠簸的更厉害点，水平震荡的幅度也大，感觉这才叫飞行，以前的飞行家还真是得有点冒险精神才行。</p>
<p> <img class="img-responsive center-block" src="https://raw.githubusercontent.com/joshua19881228/my_blogs/master/Life_Discovery/Miscellaneous/figures/krakow/02.jpg" alt="" width="480"/></p>
<p>在克拉科夫的住处是一个离中心市集广场只有50米的小旅馆，旅馆在一个窄窄的幽静的小巷子里，住宿条件很一般，不过是那种特别典型的欧洲老房子，石头砌的墙壁，大大的木门、陡峭的木楼梯、吱吱作响的楼板。沿着小巷到中央市集广场就变得热闹多了，广场中心是一个大市场，算是市民生活的中心了。对于这个广场，我记忆最深刻不是市场本身，而是坐落在广场南侧的圣玛丽教堂，这个教堂有两座钟楼，较高的一栋是尖顶，另一栋是穹顶，大概是因为教堂修建历时太久，流行的风格已经变了。每隔一个小时，从钟楼顶部都会响起号角声，戛然而止的号角声让人感觉曲子是突然中断的，这是为了纪念13世纪的一名号手，他在蒙古人袭击城市时发出警报而被弓箭射中喉咙，正午的号角声由波兰国家电台向波兰国内外播放。这个故事给我留下了特别深刻的印象，以至于在我准备雅思口语时，把在这里的见闻作为回答有关建筑、旅行主题的素材。</p>
<p> <img class="img-responsive center-block" src="https://raw.githubusercontent.com/joshua19881228/my_blogs/master/Life_Discovery/Miscellaneous/figures/krakow/03.jpg" alt="" width="480"/></p>
<p>克拉科夫是一座古老的城市，在公元700年前后建成，所以城中的建筑风格多种多样，有很多有趣的现象。例如刚刚说到的不对称的圣玛丽教堂，更有趣的是广场西南角的圣亚德伯堂，这座教堂有上下两层，下层是一个半地下室。实际上，这是两座教堂，半地下室是一座更为古老的教堂，在这座老教堂的正上方又重修了一座新教堂。一个有趣的说法是在古时候，人们不注意卫生，垃圾满街乱堆乱扔，久而久之真个城市的地面就被垫高了，最后不得不重修建了一座教堂。不知道这个说法的真实性怎么样，不过在克拉科夫确实有很多半地下室。</p>
<p> <img class="img-responsive center-block" src="https://raw.githubusercontent.com/joshua19881228/my_blogs/master/Life_Discovery/Miscellaneous/figures/krakow/04.jpg" alt="" width="480"/></p>
<p>另一个不得不提的是坐落在城外瓦维尔山上的一座城堡——瓦维尔城堡，城堡背后是维斯瓦河，算是一个易守难攻的地方。在这里有着最古老的骑士屠龙的传说。很久很久以前，在瓦维尔山下维斯瓦河边的洞穴里住着一头恶龙，它要求人们每个月进贡一名美貌的少女让它吃掉。国王为了拯救全城的百姓许诺谁杀了这头邪恶的龙，他就把自己的女儿嫁给这位英雄。不过屠龙的并不是骑士，而是一名鞋匠铺的小学徒。他引诱龙吃下了塞满硫磺的羊，被烧的难受的龙拼命地喝维斯瓦河里的水，最后撑破了胃死去。后来国王就在这个地方建立了克拉科夫城，在瓦维尔山上建起了瓦维尔城堡。从此，小学徒和公主幸福地生活在城堡里。</p>
<p>城堡的正中央有一组废墟，那是最初城堡的所在地，很小，随着时间的推移，城堡不断扩建，变成了现在的模样。其中的瓦维尔主教座堂据说包含了欧洲几乎所有的建筑风格，研究欧洲建筑如果没有来考察过瓦维尔主教座堂可算是不称职的。城堡里有博物馆，藏有达芬奇的名画《抱银鼠的女子》。另一个让我惊喜的是见到了波兰翼骑兵的盔甲，记得小时候玩《帝国时代II》，其中的斥候骑兵就是背后插翅膀的，当时还觉得居然有这么奇怪的骑兵，这次算是见到真品了。抄一段百度百科上的话</p>
<blockquote>
<p>13世纪，波兰人面对的主要敌人有两个：西北面的条顿骑士和东面的蒙古人。面对东线开阔的地形和机动的蒙古骑兵，波兰军不堪一击，1241年连当时的首都克拉科夫都让蒙古人给洗劫了一道。从14世纪起波兰的主要敌人是西边的条顿骑士，15世纪的13年战争是波兰崛起的开始。通过这场战争，波兰不仅驱逐了条顿势力，同时也锻炼了一支军队，其中以翼骑兵最为著名。</p>
</blockquote>
<p> <img class="img-responsive center-block" src="https://raw.githubusercontent.com/joshua19881228/my_blogs/master/Life_Discovery/Miscellaneous/figures/krakow/05.png" alt="" width="480"/></p>
<p>克拉科夫还是一座宗教城市，诞生了第一位波兰籍的教皇——约翰·保罗二世。约翰·保罗二世曾经发表过一些有关教会与犹太人关系的演讲，并经常对在犹太人大屠杀牺牲的犹太人表示敬意。1979年，他成为了第一个访问波兰奥斯威辛集中营的教皇。他是少数在犹太文化下长大的教皇。2000年3月，他访问耶路撒冷，他说：“犹太人是我们的兄长。”一些人认为这是承认天主教由犹太教所分出来，而耶稣最早的跟随者是犹太人。在城内一个神学院的窗口上有一幅他的画像，据说在成为教皇以前，作为克拉科夫的总主教，他经常坐在这个阳台上，与窗口外的神学院的学生和克拉科夫的市民交谈。在克拉科夫可能有上百座大大小小的教堂，包括一些已经成为废墟的教堂都被保留了下来。</p>
<p> <img class="img-responsive center-block" src="https://raw.githubusercontent.com/joshua19881228/my_blogs/master/Life_Discovery/Miscellaneous/figures/krakow/06.png" alt="" width="480"/></p>
<p>还有一个大家熟知的故事也发生在这里，这就是《辛德勒的名单》。克拉科夫的卡齐米日地区，就是这部电影的舞台原型。很多年前看这部电影的时候，我从未想过自己可以走进电影中的场景。电影中很多实景在此拍摄，至今还可以找到。在这个工厂附近有很多犹太人的墓地，很多墓主人都是纳粹时期罹难的。英雄广场上有68张铜椅子组成的雕塑群，代表着曾在这里生活过的6.8万犹太人。空旷的广场，空荡荡的椅子，一派肃杀。身处其中不禁叹气，心中荡起无限悲凉。</p>
<p> <img class="img-responsive center-block" src="https://raw.githubusercontent.com/joshua19881228/my_blogs/master/Life_Discovery/Miscellaneous/figures/krakow/07.png" alt="" width="480"/></p>
<p>最后说说维耶利奇卡的盐矿，公元八世纪的时候，这里发现了岩盐矿，十一世纪时开始大规模开采，十三世纪以后成为重要的岩盐来源，也成为波兰的重要财政来源。地下盐矿共九层，第一层距地面65米，第九层深达327米。坑道总长达到300公里，向游客开放大约10公里。这里的矿工不是奴隶或者赤贫者，他们有着很高的社会地位，收入丰厚并且受人尊敬。在漫长的岁月中，矿工们形成了把岩盐原料雕刻成各种物品的传统，地下教堂、圣坛、浮雕以及数以百计的真人大小的雕像都是他们的杰作。维耶利奇卡盐矿最大的礼拜堂位于地下101米处，长50多米，宽15米，高12米。其中有一幅盐雕的最后的晚餐，浮雕深度只有几厘米，但是从特定角度观察却立体感十足，令人称奇。每位游客还可以领取一袋这里出产的原盐，自己尝了尝，还是很咸的。</p>
<p> <img class="img-responsive center-block" src="https://raw.githubusercontent.com/joshua19881228/my_blogs/master/Life_Discovery/Miscellaneous/figures/krakow/08.png" alt="" width="480"/></p>
<p>克拉科夫相对那些更为热门的欧洲旅游城市更为恬静舒适，而且处处都是景点，走几步就可以停下来细细的品味，特别适合溜溜达达的闲逛，让人自然而然地放松。</p>
<p> <img class="img-responsive center-block" src="https://raw.githubusercontent.com/joshua19881228/my_blogs/master/Life_Discovery/Miscellaneous/figures/krakow/09.png" alt="" width="480"/></p>
<p><img class="img-responsive center-block" src="https://raw.githubusercontent.com/joshua19881228/my_blogs/master/Life_Discovery/Miscellaneous/figures/krakow/10.jpg" alt="" width="480"/></p>
<p><img class="img-responsive center-block" src="https://raw.githubusercontent.com/joshua19881228/my_blogs/master/Life_Discovery/Miscellaneous/figures/krakow/11.jpg" alt="" width="480"/></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/04/16/Computer_Vision/2015-04-16-caffe-windows-part2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar-icon.png">
      <meta itemprop="name" content="Joshua LI">
      <meta itemprop="description" content="Do not aim for success if you want it; just do what you love and believe in, and it will come naturally.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joshua's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/04/16/Computer_Vision/2015-04-16-caffe-windows-part2/" class="post-title-link" itemprop="url">VS2013配置Caffe卷积神经网络工具（64位Windows 7）——建立工程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-04-16 00:00:00" itemprop="dateCreated datePublished" datetime="2015-04-16T00:00:00+08:00">2015-04-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-19 17:11:04" itemprop="dateModified" datetime="2022-08-19T17:11:04+08:00">2022-08-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Vision/" itemprop="url" rel="index"><span itemprop="name">Computer Vision</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2014年4月的时候自己在公司就将Caffe移植到Windows系统了，今年自己换了台电脑，想在家里也随便跑跑，本来也装了Ubuntu可以很方便的配置好，无奈在家的风格是“娱乐的时候抽空学习”，所以移植到Windows还是很有必要的。但是，公司禁止将公司内部资料带出，很多地方又都忘记了，周末磨了一天终于移植完，本篇为记录将Caffe移植至Windows7 x64系统下的一些关键步骤。下面介绍如何从源码建立VS2013工程。</p>
<h2 id="Table-of-Content"><a href="#Table-of-Content" class="headerlink" title="Table of Content"></a>Table of Content</h2><ul>
<li>Content<br>{:toc}</li>
</ul>
<h2 id="1-下载源码"><a href="#1-下载源码" class="headerlink" title="1. 下载源码"></a>1. 下载源码</h2><p>从<a href="https://github.com/BVLC/caffe" target="_blank" rel="noopener">https://github.com/BVLC/caffe</a>下载caffe源码，master或者dev版本都可以，本文中以dev为例</p>
<h2 id="2-建立工程"><a href="#2-建立工程" class="headerlink" title="2. 建立工程"></a>2. 建立工程</h2><p>新建一个空的控制台VS2013工程，起名为caffe-dev。</p>
<p>File —&gt; New —&gt; Project</p>
<p>选择Win32 Console Application</p>
<p>选择工程路径，比如D:\CODE\CXX</p>
<p>给项目命名caffe-dev</p>
<p>单击OK后选择Empty project </p>
<h2 id="3-将工程的Solution-Platform改为x64"><a href="#3-将工程的Solution-Platform改为x64" class="headerlink" title="3. 将工程的Solution Platform改为x64"></a>3. 将工程的Solution Platform改为x64</h2><p>Build —&gt; Configuration Manager —&gt; Active solution platform —&gt; new —&gt; x64 —&gt; OK </p>
<h2 id="4-设置CUDA编译"><a href="#4-设置CUDA编译" class="headerlink" title="4. 设置CUDA编译"></a>4. 设置CUDA编译</h2><p>Project —&gt; Build Customizations… —&gt; CUDA 7.0 —&gt; OK </p>
<h2 id="5-设置一些工程下的路径"><a href="#5-设置一些工程下的路径" class="headerlink" title="5. 设置一些工程下的路径"></a>5. 设置一些工程下的路径</h2><p>注意Debug和Release下都要设置</p>
<p>在Project —&gt; Properties —&gt; Configuration Properties —&gt; VC++ Directories —&gt; Include Directories中添加openblas、opencv、boost和cuda，例如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">D:\LIBS\boost_1_57_0;D:\LIBS\OpenBLAS\include</span><br><span class="line">D:\LIBS\opencv\build\include</span><br><span class="line">D:\LIBS\opencv\build\include\opencv</span><br><span class="line">D:\LIBS\opencv\build\include\opencv2</span><br><span class="line">C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v7.0\include</span><br></pre></td></tr></table></figure>
<p>在Project —&gt; Properties —&gt; Configuration Properties —&gt; VC++ Directories —&gt; Library Directories中添加openblas、opencv、boost和cuda，例如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">D:\LIBS\OpenBLAS\lib</span><br><span class="line">D:\LIBS\opencv\build\x64\vc12\lib</span><br><span class="line">D:\LIBS\boost_1_57_0\lib</span><br><span class="line">C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v7.0\lib\x64</span><br></pre></td></tr></table></figure>
<h2 id="6-拷贝源码"><a href="#6-拷贝源码" class="headerlink" title="6. 拷贝源码"></a>6. 拷贝源码</h2><p>将压缩包内的include、src和tools文件夹拷贝到工程根目录下，同时把整理好的3rdparty文件夹也拷贝到工程目录下 </p>
<h2 id="7-添加第三方依赖库路径"><a href="#7-添加第三方依赖库路径" class="headerlink" title="7. 添加第三方依赖库路径"></a>7. 添加第三方依赖库路径</h2><p>添加caffe的路径和3rdparty中第三方依赖库的路径，同样Debug和Release都要设置</p>
<p>在Project —&gt; Properties —&gt; Configuration Properties —&gt; C/C++ —&gt; General —&gt; Additional Include Directories中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">..&#x2F;include;..&#x2F;src</span><br><span class="line">..&#x2F;3rdparty&#x2F;include</span><br><span class="line">..&#x2F;3rdparty&#x2F;include&#x2F;hdf5</span><br><span class="line">..&#x2F;3rdparty&#x2F;include&#x2F;lmdb</span><br></pre></td></tr></table></figure>
<p>在Project —&gt; Properties —&gt; Configuration Properties —&gt; Linker —&gt; General —&gt; Additional Library Directories中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">..&#x2F;3rdparty&#x2F;lib</span><br></pre></td></tr></table></figure>
<p>在Project —&gt; Properties —&gt; Configuration Properties —&gt; Linker —&gt; Input —&gt; Additional Dependencies中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">opencv_core2410.lib</span><br><span class="line">opencv_highgui2410.lib</span><br><span class="line">opencv_imgproc2410.lib</span><br><span class="line">cudart.lib</span><br><span class="line">cublas.lib</span><br><span class="line">curand.lib</span><br><span class="line">gflags.lib</span><br><span class="line">libglog.lib</span><br><span class="line">libopenblas.dll.a</span><br><span class="line">libprotobuf.lib</span><br><span class="line">libprotoc.lib</span><br><span class="line">leveldb.lib</span><br><span class="line">lmdb.lib</span><br><span class="line">libhdf5.lib</span><br><span class="line">libhdf5_hl.lib</span><br><span class="line">Shlwapi.lib</span><br></pre></td></tr></table></figure>
<p>注意在Debug下应添加xxxd.lib形式的静态库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">opencv_core2410d.lib</span><br><span class="line">opencv_highgui2410d.lib</span><br><span class="line">opencv_imgproc2410d.lib</span><br><span class="line">cudart.lib</span><br><span class="line">cublas.lib</span><br><span class="line">curand.lib</span><br><span class="line">gflagsd.lib</span><br><span class="line">libglogd.lib</span><br><span class="line">libopenblas.dll.a</span><br><span class="line">libprotobufd.lib</span><br><span class="line">libprotoc.lib</span><br><span class="line">leveldbd.lib</span><br><span class="line">lmdbd.lib</span><br><span class="line">libhdf5.lib</span><br><span class="line">libhdf5_hl.lib</span><br><span class="line">Shlwapi.lib</span><br></pre></td></tr></table></figure>
<h2 id="8-生成pb文件"><a href="#8-生成pb文件" class="headerlink" title="8. 生成pb文件"></a>8. 生成pb文件</h2><p>利用protoc.exe和caffe.proto生成caffe.pb.h和caffe.pb.cc文件</p>
<p>在编译protobuf的时候会生成一个可执行文件protoc.exe，在工程的D:\CODE\CXX\caffe-dev\src\caffe\proto路径下有一个文件叫caffe.proto，可以将protoc.exe拷贝到该路径下，在命令行中进入D:\CODE\CXX\caffe-dev\src\caffe\proto路径，输入命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">protoc.exe caffe.proto --cpp_output&#x3D;.&#x2F;</span><br></pre></td></tr></table></figure>
<p>可以看到在该路径下会生成caffe.pb.h和caffe.pb.cc，在D:\CODE\CXX\caffe\include\caffe中新建一个文件夹proto，将生成的两个文件移动到D:\CODE\CXX\caffe\include\caffe\proto中</p>
<h2 id="9-准备mkstemp-h和mkstemp-cpp文件。"><a href="#9-准备mkstemp-h和mkstemp-cpp文件。" class="headerlink" title="9. 准备mkstemp.h和mkstemp.cpp文件。"></a>9. 准备mkstemp.h和mkstemp.cpp文件。</h2><p>将mkstemp.h放在include/caffe/util/路径下，mkstemp.h中的内容为</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;io.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mkstemp</span><span class="params">(<span class="keyword">char</span> *templates)</span></span>;</span><br></pre></td></tr></table></figure>
<p>将mkstemp.cpp放在src/caffe/util/路径下，mkstemp.cpp中的内容为</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* mkstemp extracted from libc/sysdeps/posix/tempname.c.  Copyright</span></span><br><span class="line"><span class="comment">    (C) 1991-1999, 2000, 2001, 2006 Free Software Foundation, Inc.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    The GNU C Library is free software; you can redistribute it and/or</span></span><br><span class="line"><span class="comment">    modify it under the terms of the GNU Lesser General Public</span></span><br><span class="line"><span class="comment">    License as published by the Free Software Foundation; either</span></span><br><span class="line"><span class="comment">    version 2.1 of the License, or (at your option) any later version.  */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"caffe/util/mkstemp.hpp"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">char</span> letters[] =</span><br><span class="line"><span class="string">"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Generate a temporary file name based on TMPL.  TMPL must match the</span></span><br><span class="line"><span class="comment">    rules for mk[s]temp (i.e. end in "XXXXXX").  The name constructed</span></span><br><span class="line"><span class="comment">    does not exist at the time of the call to mkstemp.  TMPL is</span></span><br><span class="line"><span class="comment">    overwritten with the result.  */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mkstemp</span> <span class="params">(<span class="keyword">char</span> *tmpl)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len;</span><br><span class="line">    <span class="keyword">char</span> *XXXXXX;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> value;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> random_time_bits;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> count;</span><br><span class="line">    <span class="keyword">int</span> fd = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">int</span> save_errno = errno;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* A lower bound on the number of temporary files to attempt to</span></span><br><span class="line"><span class="comment">        generate.  The maximum total number of temporary file names that</span></span><br><span class="line"><span class="comment">        can exist for a given template is 62**6.  It should never be</span></span><br><span class="line"><span class="comment">        necessary to try all these combinations.  Instead if a reasonable</span></span><br><span class="line"><span class="comment">        number of names is tried (we define reasonable as 62**3) fail to</span></span><br><span class="line"><span class="comment">        give the system administrator the chance to remove the problems.  */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ATTEMPTS_MIN (62 * 62 * 62)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* The number of times to attempt to generate a temporary file.  To</span></span><br><span class="line"><span class="comment">        conform to POSIX, this must be no smaller than TMP_MAX.  */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> ATTEMPTS_MIN &lt; TMP_MAX</span></span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> attempts = TMP_MAX;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> attempts = ATTEMPTS_MIN;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    len = <span class="built_in">strlen</span> (tmpl);</span><br><span class="line">    <span class="keyword">if</span> (len &lt; <span class="number">6</span> || <span class="built_in">strcmp</span> (&amp;tmpl[len - <span class="number">6</span>], <span class="string">"XXXXXX"</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        errno = EINVAL;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* This is where the Xs start.  */</span></span><br><span class="line">    XXXXXX = &amp;tmpl[len - <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Get some more or less random data.  */</span></span><br><span class="line">    &#123;</span><br><span class="line">    SYSTEMTIME      stNow;</span><br><span class="line">    FILETIME ftNow;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get system time</span></span><br><span class="line">    GetSystemTime(&amp;stNow);</span><br><span class="line">    stNow.wMilliseconds = <span class="number">500</span>;</span><br><span class="line">    <span class="keyword">if</span> (!SystemTimeToFileTime(&amp;stNow, &amp;ftNow))</span><br><span class="line">    &#123;</span><br><span class="line">        errno = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    random_time_bits = (((<span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span>)ftNow.dwHighDateTime &lt;&lt; <span class="number">32</span>)</span><br><span class="line">                        | (<span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span>)ftNow.dwLowDateTime);</span><br><span class="line">    &#125;</span><br><span class="line">    value += random_time_bits ^ (<span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span>)GetCurrentThreadId ();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (count = <span class="number">0</span>; count &lt; attempts; value += <span class="number">7777</span>, ++count)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> v = value;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* Fill in the random bits.  */</span></span><br><span class="line">        XXXXXX[<span class="number">0</span>] = letters[v % <span class="number">62</span>];</span><br><span class="line">        v /= <span class="number">62</span>;</span><br><span class="line">        XXXXXX[<span class="number">1</span>] = letters[v % <span class="number">62</span>];</span><br><span class="line">        v /= <span class="number">62</span>;</span><br><span class="line">        XXXXXX[<span class="number">2</span>] = letters[v % <span class="number">62</span>];</span><br><span class="line">        v /= <span class="number">62</span>;</span><br><span class="line">        XXXXXX[<span class="number">3</span>] = letters[v % <span class="number">62</span>];</span><br><span class="line">        v /= <span class="number">62</span>;</span><br><span class="line">        XXXXXX[<span class="number">4</span>] = letters[v % <span class="number">62</span>];</span><br><span class="line">        v /= <span class="number">62</span>;</span><br><span class="line">        XXXXXX[<span class="number">5</span>] = letters[v % <span class="number">62</span>];</span><br><span class="line"></span><br><span class="line">        fd = <span class="built_in">open</span> (tmpl, O_RDWR | O_CREAT | O_EXCL, _S_IREAD | _S_IWRITE);</span><br><span class="line">        <span class="keyword">if</span> (fd &gt;= <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        errno = save_errno;</span><br><span class="line">        <span class="keyword">return</span> fd;</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (errno != EEXIST)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* We got out of the loop because we ran out of combinations to try.  */</span></span><br><span class="line">    errno = EEXIST;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10-将caffe的源文件添加到工程中"><a href="#10-将caffe的源文件添加到工程中" class="headerlink" title="10. 将caffe的源文件添加到工程中"></a>10. 将caffe的源文件添加到工程中</h2><p>将D:\CODE\CXX\caffe-dev\src\caffe路径下除了test文件中的所有源文件添加到工程中，如果想要跑一些测试代码，也可以把test中的源文件加进去</p>
<p>将D:\CODE\CXX\caffe-dev\include\caffe\proto下的caffe.pb.cc添加到工程中</p>
<p>将D:\CODE\CXX\caffe-dev\tools下的caffe.cpp添加到工程中 </p>
<h2 id="11-修改一些代码"><a href="#11-修改一些代码" class="headerlink" title="11. 修改一些代码"></a>11. 修改一些代码</h2><p>在include/caffe/common.hpp中添加<code>#include &lt;direct.h&gt;</code></p>
<p>在include/caffe/util/io.hpp中添加<code>#include &quot;mkstemp.hpp&quot;</code>，并将<code>close</code>函数替换为<code>_close</code>，将<code>char* mkdtemp_result = mkdtemp(temp_dirname_cstr);</code>替换为<code>errno_t mkdtemp_result = _mktemp_s(temp_dirname_cstr, sizeof(temp_dirname_cstr));</code></p>
<p>将bnll_layer.cu中的<code>const float kBNLL_THRESHOLD = 50.;</code>修改为<code>#define kBNLL_THRESHOLD 50.</code></p>
<p>将util/db.cpp中的<code>mkdir(source.c_str(), 0744)</code>修改为<code>_mkdir(source.c_str())</code></p>
<p>将util/io.cpp中的<code>open</code>函数替换为<code>_open</code>，<code>close</code>函数替换为<code>_close</code></p>
<p>将util/io.cpp中ReadProtoFromBinaryFile函数中的<code>int fd = open(filename, O_RDONLY);</code>替换为<code>int fd = open(filename, O_RDONLY | O_BINARY);</code></p>
<p>在util/math_functions.cpp中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#define __builtin_popcount __popcnt </span><br><span class="line">#define __builtin_popcountl __popcnt</span><br></pre></td></tr></table></figure>
<p>在common.cpp中添加<code>#include &lt;process.h&gt;</code></p>
<p>将<code>pid = getpid();</code>替换为<code>pid = _getpid();</code> </p>
<p>注释掉<code>::google::InstallFailureSignalHandler();</code></p>
<p>将solver.cpp中的<code>snprintf</code>函数替换为<code>sprintf_s</code></p>
<p>编译吧！！！！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/04/15/Computer_Vision/2015-04-15-caffe-windows-part1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar-icon.png">
      <meta itemprop="name" content="Joshua LI">
      <meta itemprop="description" content="Do not aim for success if you want it; just do what you love and believe in, and it will come naturally.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joshua's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2015/04/15/Computer_Vision/2015-04-15-caffe-windows-part1/" class="post-title-link" itemprop="url">VS2013配置Caffe卷积神经网络工具（64位Windows 7）——准备依赖库</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2015-04-15 00:00:00" itemprop="dateCreated datePublished" datetime="2015-04-15T00:00:00+08:00">2015-04-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-19 17:11:04" itemprop="dateModified" datetime="2022-08-19T17:11:04+08:00">2022-08-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Vision/" itemprop="url" rel="index"><span itemprop="name">Computer Vision</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2014年4月的时候自己在公司就将Caffe移植到Windows系统了，今年自己换了台电脑，想在家里也随便跑跑，本来也装了Ubuntu可以很方便的配置好，无奈在家的风格是“娱乐的时候抽空学习”，所以移植到Windows还是很有必要的。但是，公司禁止将公司内部资料带出，很多地方又都忘记了，周末磨了一天终于移植完，本篇为记录将Caffe移植至Windows7 x64系统下的一些关键步骤。第一步先看看这老些依赖库怎么搞。</p>
<p>在真正开始编译各依赖库之前，需要准备一些必备工具：</p>
<p>首先当然是VS2013，下载地址：<a href="https://www.visualstudio.com/" target="_blank" rel="noopener">https://www.visualstudio.com/</a></p>
<p>其次是CMake工具，下载地址：<a href="http://www.cmake.org/download/" target="_blank" rel="noopener">http://www.cmake.org/download/</a></p>
<h2 id="Table-of-Content"><a href="#Table-of-Content" class="headerlink" title="Table of Content"></a>Table of Content</h2><ul>
<li>Content<br>{:toc}</li>
</ul>
<h2 id="1-Boost"><a href="#1-Boost" class="headerlink" title="1. Boost"></a>1. Boost</h2><p>下载地址：<a href="http://www.boost.org/" target="_blank" rel="noopener">http://www.boost.org/</a></p>
<p>编译方法：</p>
<ol>
<li>运行Visual Studio Tools中的VS2013 x64 Cross Tools Command Prompt终端工具</li>
<li>从终端进入boost库所在目录，如D:\LIBS\boost_1_57_0</li>
<li>运行bootstrap.bat生产64位的bjam.exe</li>
<li>输入命令进行编译，更正一下，msvc-12.0才是vs2013哈</li>
</ol>
<p>静态库：bjam —build-type=complete toolset=msvc-9.0 toolset=msvc-12.0 threading=multi link=static address-model=64</p>
<p>共享库：bjam —build-type=complete toolset=msvc-9.0 toolset=msvc-12.0 threading=multi link=shared address-model=64</p>
<h2 id="2-OpenCV"><a href="#2-OpenCV" class="headerlink" title="2. OpenCV"></a>2. OpenCV</h2><p>下载地址：<a href="http://opencv.org/downloads.html" target="_blank" rel="noopener">http://opencv.org/downloads.html</a> 本文中使用的是2.4.10版本</p>
<p>编译方法：</p>
<p>下载后的安装包中有已编译好的库，可直接引用，如D:\LIBS\opencv\build\x64\vc12</p>
<h2 id="3-OpenBlas"><a href="#3-OpenBlas" class="headerlink" title="3. OpenBlas"></a>3. OpenBlas</h2><p>下载地址：<a href="http://sourceforge.net/projects/openblas/files/" target="_blank" rel="noopener">http://sourceforge.net/projects/openblas/files/</a></p>
<p>编译方法：</p>
<p>OpenBlas库在windows上编译起来比较复杂，这里给出的下载地址是一个已编译好的压缩包OpenBLAS-v0.2.14-Win32.zip (12.1 MB)，直接提供了./bin ./include ./lib路径</p>
<h2 id="4-CUDA"><a href="#4-CUDA" class="headerlink" title="4. CUDA"></a>4. CUDA</h2><p>下载地址：<a href="https://developer.nvidia.com/cuda-downloads" target="_blank" rel="noopener">https://developer.nvidia.com/cuda-downloads</a></p>
<p>编译方法：</p>
<p>与OpenCV类似，安装好后直接有已编译好的库。如C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v7.0\include和C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v7.0\lib\x64 </p>
<p>以上是依赖库比较常用，最好将该它们的include和lib加入到Windows的环境变量中，方便后续的库的编译</p>
<h2 id="5-GFlags"><a href="#5-GFlags" class="headerlink" title="5. GFlags"></a>5. GFlags</h2><p>下载地址：<a href="https://github.com/gflags/gflags" target="_blank" rel="noopener">https://github.com/gflags/gflags</a></p>
<p>编译方法：</p>
<ol>
<li>启动CMake(cmake-gui)工具</li>
<li>设置source code路径和build路径</li>
<li>单击Configure按钮，并选择并选择Visual Studio 12 2013 Win64编译器编译器</li>
<li>更新完成后，勾选中BUILD_SHARED_LIBS和BUILD_STATIC_LIBS</li>
<li>单击Generate按钮，生成VS工程 </li>
<li>打开刚刚生成的VS工程，build其中的ALL_BUILD工程，注意选择x64模式，并分别生成Debug和Release下的库 </li>
<li>编译成功后，在工程路径下会生成bin、include、lib三个文件夹 </li>
</ol>
<h2 id="6-GLog"><a href="#6-GLog" class="headerlink" title="6. GLog"></a>6. GLog</h2><p>下载地址：<a href="https://github.com/google/glog" target="_blank" rel="noopener">https://github.com/google/glog</a></p>
<p>编译方法：</p>
<p>该工程中包含VS工程google-glog.sln，打开直接编译即可，同样注意Solution Platform选择x64模式，并分别生成Debug和Release下的库</p>
<h2 id="7-LevelDB"><a href="#7-LevelDB" class="headerlink" title="7. LevelDB"></a>7. LevelDB</h2><p>下载地址：<a href="https://github.com/bureau14/leveldb" target="_blank" rel="noopener">https://github.com/bureau14/leveldb</a></p>
<p>这里没有选择官方的<a href="https://github.com/google/leveldb" target="_blank" rel="noopener">https://github.com/google/leveldb</a>是由于官方版本移除了CMake的依赖项，自己写起来比较复杂</p>
<p>编译方法：</p>
<p>与编译GFlags方法类似，唯一需要注意的地方是将CMakeLists.txt中第82行的-DSNAPPY注释掉，否则需要依赖Snappy库，其实并不绝对需要，为了简单起见将此库去掉。另外Leveldb依赖于boost库，如果没有将boost库添加至环境变量，可能需要手动进行设置。</p>
<h2 id="8-LMDB"><a href="#8-LMDB" class="headerlink" title="8. LMDB"></a>8. LMDB</h2><p>下载地址：<a href="https://gitorious.org/mdb/mdb/archive/462dc097451834477b597447af69c5acc93182b7.tar.gz" target="_blank" rel="noopener">https://gitorious.org/mdb/mdb/archive/462dc097451834477b597447af69c5acc93182b7.tar.gz</a></p>
<p>编译方法：</p>
<ol>
<li>解压压缩包到某路径，例如D:\CODE\CXX\mdb-mdb</li>
<li>在VS2013中新建工程，FILE —&gt; New —&gt; Project From Existing Code.. </li>
<li>选取源码所在路径，并给工程起名 </li>
<li>单击next按钮后选择Project type为Console application project </li>
<li>将Solution Platform修改为x64模式</li>
<li>注意将工程的输出改为静态库，右键单击工程 —&gt; property —&gt; Configuration Properties —&gt; General —&gt; Project Default —&gt; Configureation Type —&gt; Static library (.lib)</li>
<li>其中一个.c文件中包含了unistd.h，为了解决这个问题需要准备三个文件 unistd.h、getopt.h、getopt.c。unistd.h可以考<a href="http://stackoverflow.com/questions/341817/is-there-a-replacement-for-unistd-h-for-windows-visual-c" target="_blank" rel="noopener">http://stackoverflow.com/questions/341817/is-there-a-replacement-for-unistd-h-for-windows-visual-c</a>解决。另外两个可以从<a href="http://ieng6.ucsd.edu/~cs12x/vc08install/getopt9.zip" target="_blank" rel="noopener">http://ieng6.ucsd.edu/~cs12x/vc08install/getopt9.zip</a>下载</li>
<li>最后编译即可</li>
</ol>
<h2 id="9-ProtoBuf"><a href="#9-ProtoBuf" class="headerlink" title="9. ProtoBuf"></a>9. ProtoBuf</h2><p>下载地址：<a href="https://github.com/google/protobuf" target="_blank" rel="noopener">https://github.com/google/protobuf</a></p>
<p>编译方法：</p>
<p>压缩包里有一个叫vsprojects的文件夹，其中有现成的VS工程，可以用来直接编译，也需要注意将Solution Platform修改为x64模式</p>
<h2 id="10-HDF5"><a href="#10-HDF5" class="headerlink" title="10. HDF5"></a>10. HDF5</h2><p>下载地址：<a href="http://www.hdfgroup.org/ftp/HDF5/current/src/CMake/hdf518-CMakeWindows.zip" target="_blank" rel="noopener">http://www.hdfgroup.org/ftp/HDF5/current/src/CMake/hdf518-CMakeWindows.zip</a></p>
<p>编译方法：</p>
<p>解压后，在VS2013 x64 Cross Tools Command Prompt终端工具中运行build-VS2013-64.bat即可。</p>
<h2 id="整理头文件和库文件"><a href="#整理头文件和库文件" class="headerlink" title="整理头文件和库文件"></a>整理头文件和库文件</h2><p>将5-10的头文件和编译后的库统一整理到一个3rdparty文件夹下，其中包含两个文件夹include和lib</p>
<p>include文件夹下包含gflags、glog、google、hdf5、leveldb、lmdb六个文件。gflags的头文件来自于生成的VS工程目录中的include文件夹；glog的头文件来自于VS工程目录中的src\windows文件夹；google中是protobuf的头文件，来自于压缩包中的src\google文件夹；hdf5来自于压缩包中的CMake\hdf5-1.8.14\src文件夹，保留.h文件即可；leveldb的头文件来自于压缩包的include文件夹；lmdb的头文件来自于压缩包中的libraries\liblmdb文件夹，保留.h文件即可</p>
<p>lib文件夹中的.lib文件直接从编译好的工程目录下拷贝即可，注意debug模式下的.lib文件的文件名修改为xxxd.lib形式</p>
<p>至此，caffe需要的各项依赖库已经准备完毕，后续会上一些图，看起来直观一些。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/23/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><span class="page-number current">24</span>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Joshua LI"
      src="/images/avatar-icon.png">
  <p class="site-author-name" itemprop="name">Joshua LI</p>
  <div class="site-description" itemprop="description">Do not aim for success if you want it; just do what you love and believe in, and it will come naturally.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">239</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">58</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/joshua19881228" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;joshua19881228" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:zhixuan.1988.li@gmail.com" title="E-Mail → mailto:zhixuan.1988.li@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/joshua1988" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;joshua1988" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Joshua LI</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  


</body>
</html>
